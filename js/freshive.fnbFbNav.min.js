// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
(function(e,t,n){"use strict";function s(t,n){this.element=t;this.options=e.extend({},i,n);this._defaults=i;this._name=r;this.init()}var r="FNBFbMenu",i={dataUrl:"//fnbsocialmedia.co.za/fnbhub/api/fbmenu?callback=?"};s.prototype.init=function(){e(this.element).attr("id","fnb-fb-nav").addClass("loading");e.when(this.getData()).then(e.proxy(function(t){var n=this.buildMenu(e(document.createElement("ul")).addClass("topmenu"),this.sanitizeData(t));e(this.element).append(n).removeClass("loading").find(".topmenu").fadeIn()},this))};s.prototype.getData=function(){return e.getJSON(this.options.dataUrl)};s.prototype.sanitizeData=function(t){e.each(t,function(t,n){n.Children=e(n.Children).filter(function(){return this.Enabled});n.Children.length>1&&n.Children.sort(function(e,t){return e.Ordinal-t.Ordinal})});return t};s.prototype.buildMenu=function(t,n){var r=this;e.each(n,function(){if(this.Label){var n=e(document.createElement("li"));n.append(e("<a href='"+this.Url+"'>"+this.Label+"</a>"));if(this.Thumb){var i=document.createElement("img");i.setAttribute("src",this.Thumb);n.find("a").prepend(i)}n.appendTo(t);if(this.Children&&this.Children.length>0){var s=e(document.createElement("ul")).addClass("submenu");s.appendTo(n.find("a").append(e(document.createElement("span")).addClass("arrow-down")).end());r.buildMenu(s,this.Children)}}});return t};e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})};e(t).on("load",function(){e('[data-fnbFbNav="true"]').each(function(){var t=e(this),n=t.data();t.FNBFbMenu(n)})})})(jQuery,window);